apiVersion: batch/v1
kind: Job
metadata:
  name: jd-assistant
  namespace: app
  labels:
    jobgroup: jd-assistant
spec:
  template:
    metadata:
      name: jd-assistant
      labels:
        jobgroup: jd-assistant
    spec:
      restartPolicy: Never
      containers:
        - name: jd-assistant
          image: docker-repository.mouse.center:1443/jd-assistant
          volumeMounts:
            - mountPath: /etc/jd-assistant/main.py
              name: cfg
              subPath: main.py
            - mountPath: /etc/jd-assistant/cookies/user.cookies
              name: cfg
              subPath: user.cookies
            - mountPath: /etc/jd-assistant/config.ini
              name: cfg
              subPath: config.ini
      volumes:
        - name: cfg
          configMap:
            name: jd-assistant-cfg
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: jd-assistant-cfg
  namespace: app
data:
  main.py: |
    import time
    from exception import AsstException
    from jd_assistant import Assistant

    if __name__ == '__main__':
        asst = Assistant()
        time.sleep(60)
        if not asst.is_login:
            raise AsstException('未登陆')
        asst.add_item_to_cart(sku_ids='100004187691')
  user.cookies: |
    ��f
    �requests.cookies��RequestsCookieJar���)��}�(�_policy��http.cookiejar��DefaultCookiePolicy���)��}�(netscape���rfc2965���rfc2109_as_netscape�N�
    strict_domain���trict_rfc2965_unverifiable���strict_ns_unverifiable���strict_ns_domain�K�strict_ns_set_initial_dollar���strict_ns_set_path���secure_protocols��https��wss����_blocked_domains�)�_allowed_domains�N�_now�JSK7`ub_cookies�}�(�passport.jd.com�}��/�}�(�alc�h�Cookie���)��}�(�version�K�name�h"�value��tFCC+WfzttxxAwB/Nh0oIg==��port�N�port_specified���domain�h�domain_specified���domain_initial_dot���path�h �path_specified���secure���expires�N�discard���comment�N�
                                           comment_url�N�rfc2109���_rest�}�HttpOnly�Nsub�_t�h$)��}�(h'Kh(h;h)�,wGWCGx78ugCftrFQMa3JzMJBg/5Ywmc3QHJvCOnSg5I=�h+Nh,�h-�passport.jd.com�h.�h/�h0h h1�h2�h3Nh4�h5Nh6Nh7�h8}�ub�DeviceSeq�h$)��}�(h'Kh(hAh)� e2967409e3f1449787bd93997e12ea01�h+Nh,�h-�passport.jd.com�h.�h/�h0h h1�h2�h3JS�$ah4�h5Nh6Nh7�h8}�HttpOnly�Nsubus�
                                                                                                                                                 qr.m.jd.com�}�h }��        QRCodeKey�h$)��}�(h'Kh(hKh)�0AAEAIPywcAPzadXrkSOY90wBGdloMwsp2f4aCf0GiDScv8Ht�h+Nh,�h-hHh.�h/�h0h h1�h2�h3Nh4�h5Nh6Nh7�h8}�HttpOnly�Nsubss�.jd.com�}�h }�(�
                                                                                                               wlfstk_smdl�h$)��}�(h'Kh(hTh)� fdd0gopfaid6t1gntbp6ogu6n44lzpof�h+Nh,�h-hQh.�h/�h0h h1�h2�h3Nh4�h5Nh6Nh7�h8}�ub�TrackID�h$)��}�(h'Kh(hYh)�l1msic7ezLPRqtHz2UZ-4wo2PsMzKSFegMjjggUdpcUM-hHi0E1qWEJowrWygFTDxUhjwdDagbKdg6MmXZXx5OcQEgTr95n3ZNEO_d7VDovY0�h+Nh,�h-�.jd.com�h.�h/�h0h h1�h2�h3J�L�ih4�h5Nh6Nh7�h8}�ub�thor�h$)��}�(h'Kh(h_h)X 7718535A87D6A71189ACEA56F114E740A21DCDCAED42EA9914632CA5C8A6E6A3C1F957EC97E695FFFE8C3CA55D6E2A4641A0FE4C3891403398B220592B3144C02781D8044A60CEBD463EDBF26A6D3118AED5AD4C0D5AD25B266C4E891349D14DFED3EF761CC04AD93AE3A2AE3CB52FE88E28A398774FF9EE0709A00602FD6C71B7FDA6B68E290DE317C2A82B47252E43�h+Nh,�h-�.jd.com�h.�h/�h0h h1�h2�h3Nh4�h5Nh6Nh7�h8}�HttpOnly�Nsub�pinId�h$)��}�(h'Kh(hfh)�QYpbleQHgjslVTi6piQX-Q�h+Nh,�h-�.jd.com�h.�h/�h15156971863_p�h+Nh,�h-�.jd.com�h.�h/�h0h h1�h2�h3JS�^`h4�h5Nh6Nh7�h8}�ub�unick�h$)��}�(h'Kh(hrh)�-%E5%B0%8F%E9%B8%A1%E7%9A%84%E6%95%91%E5%85%B5�h+Nh,�h-�.jd.com�h.�h/�h0h h1�h2�h3JS�^`h4�h5Nh6Nh7�h8}�HttpOnly�Nsub�
    ceshi3.com�h$)��}�(h'Kh(hyh)�201�h+Nh,�h-�.jd.com�h.�h/�h0h h1�h2�h3Nh4�h5Nh6Nh7�h8}�ub�_tp�h$)��}�(h'Kh(hh)�LxLwvwxCNGyqTfHC1Db%2FWA%3D%3D�h+Nh,�h-�.jd.com�h.�h/�h0h h1�h2�h3JS�^`h4�h5Nh6Nh7�h8}�ublogining�h$)��}�(15156971863_p�h+Nh,�h-�.jd.com�h.�h/�h0h h1�h2�h3JS�^`h4�h5Nh6Nh7�h8}�HttpOnly�NsubusuhSK7`ub.%
  config.ini: |
    [account]
    payment_pwd =

    [config]
    eid = YH3NQBJ3OUWBAHU66GRVMAF7S42ZEUDIKROIIYZK7ZWWLBPVI3ZGEMPNBDTOCUUSEDWQH335T43OUIONK47EOZR3MQ
    fp = e03e8102e8cd4713ece04fc2879f0122
    track_id = TestTrackId
    risk_control = TestTrackId
    timeout =
    random_useragent = false

    [messenger]
    enable = false
    sckey =
